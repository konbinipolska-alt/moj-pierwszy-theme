<div class="spotify-player-section">
  <div class="spotify-player-wrapper">
    <iframe 
      data-testid="embed-iframe" 
      class="spotify-embed"
      src="https://open.spotify.com/embed/playlist/{{ section.settings.playlist_id | default: '68q7TYjLgjswOnGRgcsSEq' }}?utm_source=generator&theme={{ section.settings.theme }}" 
      width="100%" 
      height="{{ section.settings.player_height | default: 152 }}" 
      frameBorder="0" 
      allowfullscreen="" 
      allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" 
      loading="lazy">
    </iframe>
  </div>
</div>

<style>
  .spotify-player-section {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    background-color: {{ section.settings.background_color | default: '#ffffff' }};
    padding: {{ section.settings.margins | default: 48 }}px 0;
  }

  .spotify-player-wrapper {
    max-width: 100%;
    margin: 0 auto;
    padding: 0 {{ section.settings.margins | default: 48 }}px;
  }

  .spotify-embed {
    border-radius: 12px;
    display: block;
  }
</style>

{% schema %}
{
  "name": "Spotify Player",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Kolor tła",
      "default": "#ffffff"
    },
    {
      "type": "number",
      "id": "margins",
      "label": "Marginesy sekcji (px)",
      "default": 48
    },
    {
      "type": "text",
      "id": "playlist_id",
      "label": "ID Playlisty",
      "default": "68q7TYjLgjswOnGRgcsSEq",
      "info": "ID z URL playli Spotify"
    },
    {
      "type": "number",
      "id": "player_height",
      "label": "Wysokość playera (px)",
      "default": 152
    },
    {
      "type": "select",
      "id": "theme",
      "label": "Motyw playera",
      "options": [
        {
          "value": "0",
          "label": "Jasny"
        },
        {
          "value": "1",
          "label": "Ciemny"
        }
      ],
      "default": "0"
    }
  ],
  "presets": [
    {
      "name": "Spotify Player"
    }
  ]
}
{% endschema %}

